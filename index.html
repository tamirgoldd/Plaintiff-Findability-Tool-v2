<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plaintiff Findability Tool | Darrow</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { 
      min-height: 100vh;
      background: linear-gradient(145deg, #0a0a0f 0%, #12121a 50%, #0d0d14 100%);
      font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif;
    }
    #root { min-height: 100vh; }
    
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 0.4; }
      50% { opacity: 0.8; }
    }
    
    @keyframes scaleIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    
    .question-card {
      animation: fadeInUp 0.5s ease-out forwards;
      opacity: 0;
    }
    
    .option-btn {
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .option-btn:hover {
      transform: translateY(-2px);
    }
    
    .results-panel {
      animation: scaleIn 0.4s ease-out forwards;
    }
    
    .progress-ring {
      transition: stroke-dashoffset 1s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .glow-orb {
      position: absolute;
      border-radius: 50%;
      filter: blur(100px);
      animation: pulse 4s ease-in-out infinite;
    }
  </style>
</head>
<body>
  <div id="root"></div>
  
  <script type="text/babel">
    const { useState, useEffect } = React;

    const causeOfActionOptions = [
      'CIPA',
      'CIPA (Pen-Register)',
      'VPPA',
      'BIPA',
      'WESCA',
      'ECPA',
      'IRPA',
      'CETCPA',
      'False Advertising',
      'California ARL',
      'New Hampshire wiretapping'
    ];

    const industryOptions = [
      'Healthcare',
      'News',
      'Entertainment',
      'E-commerce',
      'Financial',
      'Education',
      'Public Services',
      'Real Estate',
      'Automotive',
      'Adult',
      'Sport',
      'General'
    ];

    // Scoring weights for case details (based on historical PF data)
    const industryWeights = {
      'Healthcare': 2,       // High - accounts, patient portals, engaged users
      'E-commerce': 2,       // High - transactions, accounts, purchase history
      'Financial': 2,        // High - accounts required, strong user ID
      'Education': 2,        // High - student/faculty accounts required
      'Entertainment': 1,    // Medium - streaming accounts, subscriptions
      'News': 1,             // Medium - some subscriptions, engaged readers
      'Sport': 1,            // Medium - fan accounts, ticket purchases
      'Real Estate': 1,      // Medium - serious inquiries, contact forms
      'Automotive': 1,       // Medium - dealership interactions
      'Public Services': 0,  // Low - often anonymous users
      'General': 0,          // Low - unknown/variable engagement
      'Adult': -1            // Negative - users unlikely to come forward
    };

    const causeOfActionWeights = {
      'CIPA': 2,                      // Well-established, clear plaintiff criteria
      'CIPA (Pen-Register)': 2,       // Well-established, broader reach
      'VPPA': 2,                      // Clear video viewing records
      'BIPA': 2,                      // Clear biometric data, IL residents
      'WESCA': 1,                     // State-specific (WA)
      'ECPA': 1,                      // Federal statute, broader scope
      'IRPA': 1,                      // State-specific
      'CETCPA': 1,                    // State-specific (CA)
      'California ARL': 1,            // State-specific (CA)
      'New Hampshire wiretapping': 1, // State-specific (NH)
      'False Advertising': 0          // Requires proof of reliance, harder
    };

    const faqs = [
      {
        question: "How do I know if a brand is well-known to the relevant audience?",
        answer: "Quick research into the web traffic and popularity (you can use GPT) of the website. Compare traffic to competitors in the same domain. You may not know the name of this fertilizer brand, but is it well-known to farmers compared to other fertilizer websites?"
      },
      {
        question: "What if I'm unsure of the answer?",
        answer: "Err on the side of \"No\". At this stage, it's better for ambivalent cases to get flagged than for us to miss crucial flags."
      },
      {
        question: "What if the answer is irrelevant to this type of case?",
        answer: "Mark it as \"irrelevant\" and it will not be counted towards the score."
      },
      {
        question: "What do I do if I get a low PF score (red/orange)?",
        answer: "Flag PF in the Jira ticket and Tamir will have someone from the PF team run a deeper analysis."
      },
      {
        question: "What if the case is for several different websites?",
        answer: "Analyze each of the websites separately. Then evaluate the information - do you recommend finding a plaintiff for each of the websites? Can we add more websites that will make plaintiff finding easier?"
      }
    ];

    const questions = [
      {
        id: 1,
        text: "Is the qualifying action part of typical user behavior on the site?",
        weight: 4
      },
      {
        id: 2,
        text: "Can users with or without an account / newsletter subscription qualify?",
        weight: 4
      },
      {
        id: 3,
        text: "Is the site/brand well known to the relevant audience?",
        weight: 2
      },
      {
        id: 4,
        text: "Is the typical user located in the filing jurisdiction?",
        weight: 2
      },
      {
        id: 5,
        text: "Is the website associated with a place users go to in person?",
        weight: 1
      }
    ];

    const baseQuestionWeight = questions.reduce((sum, q) => sum + q.weight, 0);
    // Max possible weights from case details: Industry (2) + COA (2) = 4
    const maxCaseDetailsWeight = 4;
    const totalPossibleWeight = baseQuestionWeight + maxCaseDetailsWeight;

    function getRecommendation(percent) {
      if (percent >= 75) return { label: "High", sublabel: "Strong findability potential", color: "#22c55e", bg: "rgba(34, 197, 94, 0.15)" };
      if (percent >= 50) return { label: "Medium", sublabel: "Flag for PF review", color: "#f59e0b", bg: "rgba(245, 158, 11, 0.15)" };
      return { label: "Low", sublabel: "Limited findability", color: "#ef4444", bg: "rgba(239, 68, 68, 0.15)" };
    }

    function PlaintiffFindabilityTool() {
      const [answers, setAnswers] = useState({});
      const [animatedPercent, setAnimatedPercent] = useState(0);
      const [showResults, setShowResults] = useState(false);
      const [expandedFaq, setExpandedFaq] = useState(null);

      // Hardcoded API key for Gemini 2.5 Flash
      const GEMINI_API_KEY = 'AIzaSyCls9I-Fl_g4BTnRhzNkS-ZezVT9J6Q9u4';
      const [caseDetails, setCaseDetails] = useState({
        websiteName: '',
        websiteUrl: '',
        causeOfAction: '',
        industry: '',
        notes: ''
      });
      const [aiRecommendation, setAiRecommendation] = useState('');
      const [aiLoading, setAiLoading] = useState(false);
      const [aiError, setAiError] = useState('');
      const [copied, setCopied] = useState(false);

      const handleCaseDetailChange = (field, value) => {
        setCaseDetails(prev => ({ ...prev, [field]: value }));
      };

      const copyToClipboard = async (text) => {
        try {
          await navigator.clipboard.writeText(text);
          setCopied(true);
          setTimeout(() => setCopied(false), 2000);
        } catch (err) {
          console.error('Failed to copy:', err);
        }
      };

      const generateAIRecommendation = async (score, caseBonus, pct, rec) => {
        setAiLoading(true);
        setAiError('');
        setAiRecommendation('');

        const industryW = caseDetails.industry ? (industryWeights[caseDetails.industry] || 0) : 0;
        const coaW = caseDetails.causeOfAction ? (causeOfActionWeights[caseDetails.causeOfAction] || 0) : 0;
        const questionsScore = score - caseBonus;

        const prompt = `You are a legal intelligence analyst at Darrow. Generate a Jira ticket comment for the Plaintiff Finding (PF) assessment of this case. The comment should be ready to copy-paste directly into the ticket.

CASE INFORMATION:
- Website: ${caseDetails.websiteName || 'Not specified'} (${caseDetails.websiteUrl || 'No URL'})
- Cause of Action: ${caseDetails.causeOfAction || 'Not specified'}
- Industry: ${caseDetails.industry || 'Not specified'}
- Analyst Notes: ${caseDetails.notes || 'None'}

ASSESSMENT CRITERIA:
${questions.map(q => `• ${q.text}: ${answers[q.id] === 'yes' ? '✓ Yes' : answers[q.id] === 'no' ? '✗ No' : '— N/A'}`).join('\n')}

SCORE: ${pct}% (${rec.label} Findability)
- Questions: ${questionsScore}/${baseQuestionWeight}
- Case Factors: +${caseBonus} (Industry: +${industryW}, COA: +${coaW})

Generate output in this EXACT format (ready for Jira):

**PF Assessment: ${rec.label} (${pct}%)**

[2-3 sentences summarizing the key findability factors - what makes this case easy or difficult for plaintiff finding, based on the assessment answers above]

**Recommendation:** [One clear action item: either "Proceed with standard PF process" for High, "Flag for PF team review" for Medium, or "Consult PF team before proceeding" for Low]`;

        try {
          const response = await fetch(
            `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${GEMINI_API_KEY}`,
            {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                contents: [{
                  parts: [{ text: prompt }]
                }]
              })
            }
          );

          if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.error?.message || 'API request failed');
          }

          const data = await response.json();
          const aiText = data.candidates?.[0]?.content?.parts?.[0]?.text;

          if (aiText) {
            setAiRecommendation(aiText);
          } else {
            throw new Error('No response generated');
          }
        } catch (err) {
          setAiError(`AI Error: ${err.message}`);
        } finally {
          setAiLoading(false);
        }
      };

      const calculateScore = () => {
        // Base score from questions
        let score = 0;
        questions.forEach(q => {
          if (answers[q.id] === 'yes') {
            score += q.weight;
          }
        });

        // Add case details weights (Industry + Cause of Action)
        const industryWeight = caseDetails.industry ? (industryWeights[caseDetails.industry] || 0) : 0;
        const coaWeight = caseDetails.causeOfAction ? (causeOfActionWeights[caseDetails.causeOfAction] || 0) : 0;

        // Add case details weights (clamped to not go negative)
        score += Math.max(0, industryWeight + coaWeight);

        return score;
      };

      const calculateCaseDetailsWeight = () => {
        const industryWeight = caseDetails.industry ? (industryWeights[caseDetails.industry] || 0) : 0;
        const coaWeight = caseDetails.causeOfAction ? (causeOfActionWeights[caseDetails.causeOfAction] || 0) : 0;
        return Math.max(0, industryWeight + coaWeight);
      };

      const totalScore = calculateScore();
      const caseDetailsWeight = calculateCaseDetailsWeight();
      const percent = Math.round((totalScore / totalPossibleWeight) * 100);
      const recommendation = getRecommendation(percent);
      const answeredCount = Object.keys(answers).length;
      const allAnswered = answeredCount === questions.length;

      useEffect(() => {
        if (showResults) {
          const timer = setTimeout(() => {
            setAnimatedPercent(percent);
          }, 100);
          return () => clearTimeout(timer);
        }
      }, [showResults, percent]);

      const handleAnswer = (questionId, value) => {
        setAnswers(prev => ({ ...prev, [questionId]: value }));
        setShowResults(false);
        setAnimatedPercent(0);
      };

      const handleCalculate = () => {
        setShowResults(true);
        // Trigger AI recommendation generation with score details
        generateAIRecommendation(totalScore, caseDetailsWeight, percent, recommendation);
      };

      const handleReset = () => {
        setAnswers({});
        setShowResults(false);
        setAnimatedPercent(0);
        setAiRecommendation('');
        setAiError('');
        setCaseDetails({
          websiteName: '',
          websiteUrl: '',
          causeOfAction: '',
          industry: '',
          notes: ''
        });
      };

      return (
        <div style={{
          minHeight: '100vh',
          background: 'linear-gradient(145deg, #0a0a0f 0%, #12121a 50%, #0d0d14 100%)',
          fontFamily: "'DM Sans', -apple-system, BlinkMacSystemFont, sans-serif",
          color: '#e4e4e7',
          padding: '40px 20px',
          position: 'relative',
          overflow: 'hidden'
        }}>
          {/* Ambient glow effects */}
          <div className="glow-orb" style={{ width: 400, height: 400, background: 'rgba(99, 102, 241, 0.15)', top: -100, right: -100, position: 'absolute' }} />
          <div className="glow-orb" style={{ width: 300, height: 300, background: 'rgba(168, 85, 247, 0.1)', bottom: 100, left: -100, position: 'absolute', animationDelay: '2s' }} />

          <div style={{ maxWidth: 720, margin: '0 auto', position: 'relative', zIndex: 1 }}>
            {/* Header */}
            <div style={{ textAlign: 'center', marginBottom: 48 }}>
              <div style={{
                display: 'inline-flex',
                alignItems: 'center',
                gap: 8,
                padding: '8px 16px',
                background: 'rgba(99, 102, 241, 0.1)',
                border: '1px solid rgba(99, 102, 241, 0.2)',
                borderRadius: 100,
                marginBottom: 20,
                fontSize: 13,
                fontWeight: 500,
                color: '#a5b4fc',
                letterSpacing: '0.05em',
                textTransform: 'uppercase'
              }}>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                  <circle cx="11" cy="11" r="8"/>
                  <path d="m21 21-4.35-4.35"/>
                </svg>
                Legal Intelligence
              </div>
              <h1 style={{
                fontSize: 'clamp(32px, 5vw, 48px)',
                fontWeight: 700,
                margin: 0,
                background: 'linear-gradient(135deg, #fff 0%, #a5b4fc 50%, #818cf8 100%)',
                WebkitBackgroundClip: 'text',
                WebkitTextFillColor: 'transparent',
                letterSpacing: '-0.02em',
                lineHeight: 1.1
              }}>
                Plaintiff Findability
              </h1>
              <p style={{
                fontSize: 17,
                color: '#71717a',
                marginTop: 12,
                fontWeight: 400
              }}>
                Evaluate plaintiff acquisition potential for your case and find out if you need to consult with the Plaintiff team about it or not :)
                <br>
                  After you submit   
  the case details and answer the questions, an AI model will generate a        
  ready-to-use summary that you can copy directly to the case Jira ticket along 
  with the findability score.   
              </p>
            </div>

            {/* Case Details Section */}
            <div style={{
              marginBottom: 32,
              padding: 24,
              background: 'rgba(255,255,255,0.03)',
              border: '1px solid rgba(255,255,255,0.06)',
              borderRadius: 16
            }}>
              <div style={{
                display: 'flex',
                alignItems: 'center',
                gap: 12,
                marginBottom: 20
              }}>
                <div style={{
                  width: 36,
                  height: 36,
                  borderRadius: 8,
                  background: 'linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(16, 185, 129, 0.2))',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center'
                }}>
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#4ade80" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                    <polyline points="14 2 14 8 20 8"/>
                    <line x1="16" y1="13" x2="8" y2="13"/>
                    <line x1="16" y1="17" x2="8" y2="17"/>
                    <polyline points="10 9 9 9 8 9"/>
                  </svg>
                </div>
                <h2 style={{
                  margin: 0,
                  fontSize: 18,
                  fontWeight: 600,
                  color: '#fff'
                }}>
                  Case Details
                </h2>
              </div>

              <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: 16 }}>
                <div>
                  <label style={{
                    display: 'block',
                    fontSize: 13,
                    color: '#71717a',
                    marginBottom: 8
                  }}>
                    Website Name
                  </label>
                  <input
                    type="text"
                    value={caseDetails.websiteName}
                    onChange={(e) => handleCaseDetailChange('websiteName', e.target.value)}
                    placeholder="e.g., Example Corp"
                    style={{
                      width: '100%',
                      padding: '12px 14px',
                      borderRadius: 8,
                      border: '1px solid rgba(255,255,255,0.1)',
                      background: 'rgba(255,255,255,0.05)',
                      color: '#e4e4e7',
                      fontSize: 14,
                      outline: 'none'
                    }}
                  />
                </div>

                <div>
                  <label style={{
                    display: 'block',
                    fontSize: 13,
                    color: '#71717a',
                    marginBottom: 8
                  }}>
                    Website URL
                  </label>
                  <input
                    type="url"
                    value={caseDetails.websiteUrl}
                    onChange={(e) => handleCaseDetailChange('websiteUrl', e.target.value)}
                    placeholder="e.g., https://example.com"
                    style={{
                      width: '100%',
                      padding: '12px 14px',
                      borderRadius: 8,
                      border: '1px solid rgba(255,255,255,0.1)',
                      background: 'rgba(255,255,255,0.05)',
                      color: '#e4e4e7',
                      fontSize: 14,
                      outline: 'none'
                    }}
                  />
                </div>

                <div>
                  <label style={{
                    display: 'block',
                    fontSize: 13,
                    color: '#71717a',
                    marginBottom: 8
                  }}>
                    Cause of Action
                  </label>
                  <select
                    value={caseDetails.causeOfAction}
                    onChange={(e) => handleCaseDetailChange('causeOfAction', e.target.value)}
                    style={{
                      width: '100%',
                      padding: '12px 14px',
                      borderRadius: 8,
                      border: '1px solid rgba(255,255,255,0.1)',
                      background: 'rgba(255,255,255,0.05)',
                      color: caseDetails.causeOfAction ? '#e4e4e7' : '#71717a',
                      fontSize: 14,
                      outline: 'none',
                      cursor: 'pointer'
                    }}
                  >
                    <option value="">Select cause of action</option>
                    {causeOfActionOptions.map(opt => (
                      <option key={opt} value={opt}>{opt}</option>
                    ))}
                  </select>
                </div>

                <div style={{ gridColumn: 'span 2' }}>
                  <label style={{
                    display: 'block',
                    fontSize: 13,
                    color: '#71717a',
                    marginBottom: 8
                  }}>
                    Industry
                  </label>
                  <select
                    value={caseDetails.industry}
                    onChange={(e) => handleCaseDetailChange('industry', e.target.value)}
                    style={{
                      width: '100%',
                      padding: '12px 14px',
                      borderRadius: 8,
                      border: '1px solid rgba(255,255,255,0.1)',
                      background: 'rgba(255,255,255,0.05)',
                      color: caseDetails.industry ? '#e4e4e7' : '#71717a',
                      fontSize: 14,
                      outline: 'none',
                      cursor: 'pointer'
                    }}
                  >
                    <option value="">Select industry</option>
                    {industryOptions.map(opt => (
                      <option key={opt} value={opt}>{opt}</option>
                    ))}
                  </select>
                </div>

                <div style={{ gridColumn: 'span 2' }}>
                  <label style={{
                    display: 'block',
                    fontSize: 13,
                    color: '#71717a',
                    marginBottom: 8
                  }}>
                    Notes
                  </label>
                  <textarea
                    value={caseDetails.notes}
                    onChange={(e) => handleCaseDetailChange('notes', e.target.value)}
                    placeholder="Additional context for the AI recommendation..."
                    rows={3}
                    style={{
                      width: '100%',
                      padding: '12px 14px',
                      borderRadius: 8,
                      border: '1px solid rgba(255,255,255,0.1)',
                      background: 'rgba(255,255,255,0.05)',
                      color: '#e4e4e7',
                      fontSize: 14,
                      outline: 'none',
                      resize: 'vertical',
                      fontFamily: 'inherit'
                    }}
                  />
                </div>
              </div>
            </div>

            {/* Progress indicator */}
            <div style={{
              display: 'flex',
              alignItems: 'center',
              gap: 12,
              marginBottom: 32,
              padding: '16px 20px',
              background: 'rgba(255,255,255,0.03)',
              borderRadius: 12,
              border: '1px solid rgba(255,255,255,0.06)'
            }}>
              <div style={{ flex: 1 }}>
                <div style={{
                  height: 6,
                  background: 'rgba(255,255,255,0.1)',
                  borderRadius: 100,
                  overflow: 'hidden'
                }}>
                  <div style={{
                    height: '100%',
                    width: `${(answeredCount / questions.length) * 100}%`,
                    background: 'linear-gradient(90deg, #6366f1, #a855f7)',
                    borderRadius: 100,
                    transition: 'width 0.4s ease'
                  }} />
                </div>
              </div>
              <span style={{
                fontFamily: "'Space Mono', monospace",
                fontSize: 13,
                color: '#a1a1aa'
              }}>
                {answeredCount}/{questions.length}
              </span>
            </div>

            {/* Questions */}
            <div style={{ display: 'flex', flexDirection: 'column', gap: 16 }}>
              {questions.map((q, idx) => (
                <div
                  key={q.id}
                  className="question-card"
                  style={{
                    background: 'rgba(255,255,255,0.03)',
                    border: `1px solid ${answers[q.id] ? 'rgba(99, 102, 241, 0.3)' : 'rgba(255,255,255,0.06)'}`,
                    borderRadius: 16,
                    padding: 24,
                    animationDelay: `${idx * 0.1}s`
                  }}
                >
                  <div style={{ display: 'flex', alignItems: 'flex-start', gap: 16, marginBottom: 16 }}>
                    <div style={{
                      width: 32,
                      height: 32,
                      borderRadius: 8,
                      background: 'linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(168, 85, 247, 0.2))',
                      display: 'flex',
                      alignItems: 'center',
                      justifyContent: 'center',
                      fontFamily: "'Space Mono', monospace",
                      fontSize: 14,
                      fontWeight: 700,
                      color: '#a5b4fc',
                      flexShrink: 0
                    }}>
                      {q.id}
                    </div>
                    <div style={{ flex: 1 }}>
                      <p style={{ margin: 0, fontSize: 16, fontWeight: 500, lineHeight: 1.5 }}>
                        {q.text}
                      </p>
                      <span style={{
                        display: 'inline-block',
                        marginTop: 8,
                        fontSize: 12,
                        color: '#71717a',
                        fontFamily: "'Space Mono', monospace"
                      }}>
                        Weight: {q.weight}
                      </span>
                    </div>
                  </div>

                  <div style={{ display: 'flex', gap: 10 }}>
                    {['yes', 'no', 'irrelevant'].map(option => {
                      const isSelected = answers[q.id] === option;
                      const colors = {
                        yes: { bg: 'rgba(34, 197, 94, 0.15)', border: 'rgba(34, 197, 94, 0.4)', text: '#4ade80' },
                        no: { bg: 'rgba(239, 68, 68, 0.15)', border: 'rgba(239, 68, 68, 0.4)', text: '#f87171' },
                        irrelevant: { bg: 'rgba(161, 161, 170, 0.15)', border: 'rgba(161, 161, 170, 0.4)', text: '#a1a1aa' }
                      };
                      const c = colors[option];

                      return (
                        <button
                          key={option}
                          className="option-btn"
                          onClick={() => handleAnswer(q.id, option)}
                          style={{
                            flex: 1,
                            padding: '12px 16px',
                            borderRadius: 10,
                            border: `1.5px solid ${isSelected ? c.border : 'rgba(255,255,255,0.1)'}`,
                            background: isSelected ? c.bg : 'rgba(255,255,255,0.02)',
                            color: isSelected ? c.text : '#71717a',
                            fontSize: 14,
                            fontWeight: 600,
                            cursor: 'pointer',
                            textTransform: 'capitalize'
                          }}
                        >
                          {option}
                        </button>
                      );
                    })}
                  </div>
                </div>
              ))}
            </div>

            {/* Action buttons */}
            <div style={{ display: 'flex', gap: 12, marginTop: 32 }}>
              <button
                onClick={handleCalculate}
                disabled={!allAnswered}
                style={{
                  flex: 1,
                  padding: '18px 32px',
                  borderRadius: 12,
                  border: 'none',
                  background: allAnswered
                    ? 'linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)'
                    : 'rgba(255,255,255,0.05)',
                  color: allAnswered ? '#fff' : '#52525b',
                  fontSize: 16,
                  fontWeight: 600,
                  cursor: allAnswered ? 'pointer' : 'not-allowed',
                  transition: 'all 0.3s ease',
                  boxShadow: allAnswered ? '0 4px 24px rgba(99, 102, 241, 0.3)' : 'none'
                }}
              >
                Calculate Findability Score
              </button>
              <button
                onClick={handleReset}
                style={{
                  padding: '18px 24px',
                  borderRadius: 12,
                  border: '1px solid rgba(255,255,255,0.1)',
                  background: 'rgba(255,255,255,0.03)',
                  color: '#a1a1aa',
                  fontSize: 16,
                  fontWeight: 500,
                  cursor: 'pointer',
                  transition: 'all 0.3s ease'
                }}
              >
                Reset
              </button>
            </div>

            {/* Results Panel */}
            {showResults && (
              <div
                className="results-panel"
                style={{
                  marginTop: 40,
                  padding: 32,
                  background: 'linear-gradient(145deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02))',
                  border: '1px solid rgba(255,255,255,0.08)',
                  borderRadius: 20,
                  position: 'relative',
                  overflow: 'hidden'
                }}
              >
                <div style={{
                  position: 'absolute',
                  top: 0,
                  left: 0,
                  right: 0,
                  height: 3,
                  background: `linear-gradient(90deg, ${recommendation.color}, transparent)`
                }} />

                <div style={{ display: 'flex', alignItems: 'center', gap: 40, flexWrap: 'wrap' }}>
                  {/* Circular Progress */}
                  <div style={{ position: 'relative', width: 140, height: 140 }}>
                    <svg width="140" height="140" style={{ transform: 'rotate(-90deg)' }}>
                      <circle
                        cx="70"
                        cy="70"
                        r="60"
                        fill="none"
                        stroke="rgba(255,255,255,0.05)"
                        strokeWidth="12"
                      />
                      <circle
                        cx="70"
                        cy="70"
                        r="60"
                        fill="none"
                        stroke={recommendation.color}
                        strokeWidth="12"
                        strokeLinecap="round"
                        strokeDasharray={`${2 * Math.PI * 60}`}
                        strokeDashoffset={`${2 * Math.PI * 60 * (1 - animatedPercent / 100)}`}
                        className="progress-ring"
                        style={{ filter: `drop-shadow(0 0 8px ${recommendation.color})` }}
                      />
                    </svg>
                    <div style={{
                      position: 'absolute',
                      inset: 0,
                      display: 'flex',
                      flexDirection: 'column',
                      alignItems: 'center',
                      justifyContent: 'center'
                    }}>
                      <span style={{
                        fontFamily: "'Space Mono', monospace",
                        fontSize: 36,
                        fontWeight: 700,
                        color: '#fff'
                      }}>
                        {animatedPercent}%
                      </span>
                    </div>
                  </div>

                  {/* Stats */}
                  <div style={{ flex: 1, minWidth: 200 }}>
                    <div style={{
                      display: 'inline-flex',
                      alignItems: 'center',
                      gap: 8,
                      padding: '8px 16px',
                      background: recommendation.bg,
                      borderRadius: 8,
                      marginBottom: 16
                    }}>
                      <div style={{
                        width: 8,
                        height: 8,
                        borderRadius: '50%',
                        background: recommendation.color,
                        boxShadow: `0 0 8px ${recommendation.color}`
                      }} />
                      <span style={{
                        fontSize: 14,
                        fontWeight: 600,
                        color: recommendation.color
                      }}>
                        {recommendation.label} Findability
                      </span>
                    </div>

                    <p style={{
                      margin: '0 0 20px',
                      fontSize: 15,
                      color: '#a1a1aa'
                    }}>
                      {recommendation.sublabel}
                    </p>

                    <div style={{ display: 'flex', gap: 20, flexWrap: 'wrap' }}>
                      <div>
                        <div style={{ fontSize: 12, color: '#71717a', marginBottom: 4 }}>Questions</div>
                        <div style={{
                          fontFamily: "'Space Mono', monospace",
                          fontSize: 18,
                          fontWeight: 700,
                          color: '#fff'
                        }}>
                          {totalScore - caseDetailsWeight}/{baseQuestionWeight}
                        </div>
                      </div>
                      <div>
                        <div style={{ fontSize: 12, color: '#71717a', marginBottom: 4 }}>Case Bonus</div>
                        <div style={{
                          fontFamily: "'Space Mono', monospace",
                          fontSize: 18,
                          fontWeight: 700,
                          color: caseDetailsWeight > 0 ? '#4ade80' : '#fff'
                        }}>
                          +{caseDetailsWeight}/{maxCaseDetailsWeight}
                        </div>
                      </div>
                      <div>
                        <div style={{ fontSize: 12, color: '#71717a', marginBottom: 4 }}>Total</div>
                        <div style={{
                          fontFamily: "'Space Mono', monospace",
                          fontSize: 18,
                          fontWeight: 700,
                          color: '#fff'
                        }}>
                          {totalScore}/{totalPossibleWeight}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                {/* AI Recommendation Section */}
                <div style={{
                  marginTop: 24,
                  padding: 20,
                  background: 'rgba(99, 102, 241, 0.08)',
                  borderRadius: 12,
                  border: '1px solid rgba(99, 102, 241, 0.2)'
                }}>
                  <div style={{
                    display: 'flex',
                    alignItems: 'center',
                    justifyContent: 'space-between',
                    marginBottom: 12
                  }}>
                    <div style={{ display: 'flex', alignItems: 'center', gap: 10 }}>
                      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#a5b4fc" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3m9 0a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3"/>
                      </svg>
                      <span style={{
                        fontSize: 14,
                        fontWeight: 600,
                        color: '#a5b4fc'
                      }}>
                        AI Recommendation
                      </span>
                    </div>
                    {aiRecommendation && (
                      <button
                        onClick={() => copyToClipboard(aiRecommendation)}
                        style={{
                          display: 'flex',
                          alignItems: 'center',
                          gap: 6,
                          padding: '6px 12px',
                          borderRadius: 6,
                          border: '1px solid rgba(255,255,255,0.1)',
                          background: copied ? 'rgba(34, 197, 94, 0.2)' : 'rgba(255,255,255,0.05)',
                          color: copied ? '#4ade80' : '#a1a1aa',
                          fontSize: 12,
                          fontWeight: 500,
                          cursor: 'pointer',
                          transition: 'all 0.2s ease'
                        }}
                      >
                        {copied ? (
                          <>
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                              <polyline points="20 6 9 17 4 12"/>
                            </svg>
                            Copied!
                          </>
                        ) : (
                          <>
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                            </svg>
                            Copy
                          </>
                        )}
                      </button>
                    )}
                  </div>

                  {aiLoading && (
                    <div style={{
                      display: 'flex',
                      alignItems: 'center',
                      gap: 12,
                      color: '#a1a1aa',
                      fontSize: 14
                    }}>
                      <div style={{
                        width: 18,
                        height: 18,
                        border: '2px solid rgba(99, 102, 241, 0.3)',
                        borderTopColor: '#6366f1',
                        borderRadius: '50%',
                        animation: 'spin 1s linear infinite'
                      }} />
                      Generating AI recommendation...
                      <style>{`
                        @keyframes spin {
                          to { transform: rotate(360deg); }
                        }
                      `}</style>
                    </div>
                  )}

                  {aiError && (
                    <div style={{
                      padding: 12,
                      borderRadius: 8,
                      background: 'rgba(239, 68, 68, 0.1)',
                      border: '1px solid rgba(239, 68, 68, 0.2)',
                      color: '#fca5a5',
                      fontSize: 13
                    }}>
                      {aiError}
                    </div>
                  )}

                  {aiRecommendation && (
                    <p style={{
                      margin: 0,
                      fontSize: 14,
                      lineHeight: 1.7,
                      color: '#e4e4e7'
                    }}>
                      {aiRecommendation}
                    </p>
                  )}
                </div>
              </div>
            )}

            {/* FAQ Section */}
            <div style={{ marginTop: 48 }}>
              <div style={{
                display: 'flex',
                alignItems: 'center',
                gap: 12,
                marginBottom: 24
              }}>
                <div style={{
                  width: 40,
                  height: 40,
                  borderRadius: 10,
                  background: 'linear-gradient(135deg, rgba(236, 72, 153, 0.2), rgba(168, 85, 247, 0.2))',
                  display: 'flex',
                  alignItems: 'center',
                  justifyContent: 'center'
                }}>
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#f472b6" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                    <path d="M12 17h.01"/>
                  </svg>
                </div>
                <h2 style={{
                  margin: 0,
                  fontSize: 22,
                  fontWeight: 600,
                  color: '#fff'
                }}>
                  Frequently Asked Questions
                </h2>
              </div>

              <div style={{ display: 'flex', flexDirection: 'column', gap: 12 }}>
                {faqs.map((faq, idx) => (
                  <div
                    key={idx}
                    style={{
                      background: 'rgba(255,255,255,0.03)',
                      border: `1px solid ${expandedFaq === idx ? 'rgba(236, 72, 153, 0.3)' : 'rgba(255,255,255,0.06)'}`,
                      borderRadius: 12,
                      overflow: 'hidden',
                      transition: 'all 0.3s ease'
                    }}
                  >
                    <button
                      onClick={() => setExpandedFaq(expandedFaq === idx ? null : idx)}
                      style={{
                        width: '100%',
                        padding: '18px 20px',
                        background: 'transparent',
                        border: 'none',
                        color: '#e4e4e7',
                        fontSize: 15,
                        fontWeight: 500,
                        textAlign: 'left',
                        cursor: 'pointer',
                        display: 'flex',
                        alignItems: 'center',
                        justifyContent: 'space-between',
                        gap: 16
                      }}
                    >
                      <span>{faq.question}</span>
                      <svg
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="#71717a"
                        strokeWidth="2"
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        style={{
                          flexShrink: 0,
                          transform: expandedFaq === idx ? 'rotate(180deg)' : 'rotate(0deg)',
                          transition: 'transform 0.3s ease'
                        }}
                      >
                        <polyline points="6 9 12 15 18 9"/>
                      </svg>
                    </button>
                    <div style={{
                      maxHeight: expandedFaq === idx ? 300 : 0,
                      overflow: 'hidden',
                      transition: 'max-height 0.3s ease'
                    }}>
                      <div style={{
                        padding: '0 20px 18px',
                        color: '#a1a1aa',
                        fontSize: 14,
                        lineHeight: 1.7,
                        borderTop: '1px solid rgba(255,255,255,0.06)'
                      }}>
                        <div style={{ paddingTop: 16 }}>
                          {faq.answer}
                        </div>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {/* Footer */}
            <div style={{
              marginTop: 48,
              textAlign: 'center',
              fontSize: 13,
              color: '#52525b'
            }}>
              Plaintiff Findability Tool • Built for Darrow
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<PlaintiffFindabilityTool />);
  </script>
</body>
</html>
